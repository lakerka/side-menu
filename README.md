# side-menu-backend

Menu is an API that serves menu items under `menu/tree`. Menu items can be created using django admin under `admin/`.

## Technologies
Is written in Python 3. Uses Django along with Django REST. For database PostgreSQL 9.6.6 and it was set up according to [recommendations](https://docs.djangoproject.com/en/2.0/ref/databases/#postgresql-notes). Actual setup instructions can be found in `db_setup.sql` file.

## Development
* Use `db_setup.sql` to setup postgres.
* Use [instructions](http://www.microhowto.info/howto/log_all_queries_to_a_postgresql_server.html) to find out what queries are executed on db.
* To serve files generated by UI app symlink pointing to 'static' directory should be created.

Run server:
```sh
python manage.py runserver localhost:8000
```

Run unit tests:
```sh
python manage.py test --noinput --keepdb
```

Delete tree nodes:
```sh
python manage.py delete_tree_nodes
```

Generate tree nodes:
```
python manage.py generate_tree
```

## Note
* Since `ltree` field was used `gist` index instead of `btree` could be used if more operation would be needed as described in [here](https://www.postgresql.org/docs/9.1/static/ltree.html).
* Tested with `python manage.py generate_tree 1000 10000 10` response API time were around 300 ms.